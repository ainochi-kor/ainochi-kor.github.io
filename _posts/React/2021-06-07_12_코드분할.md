---
layout: post
author: ainochi-kor
title: React/12. 코드 분할
---

## 번들링

대부분 React 앱들은 Webpack, Rollup 또는 Browserify 같은 툴을 사용하여 여러 파일을 하나로 병합한 "번들 된" 파일을 웹 페이지에 포함하여 한 번에 전체 앱을 로드 할 수 있다.

#### App

``` js
// app.js
import { add } from './math.js';

console.log(add(16, 26)); // 42
```

``` js 
// math.js
export function add(a, b) {
  return a + b;
}
```

#### Bundle 

``` js
function add(a, b) {
  return a + b;
}

console.log(add(16, 26)); // 42
```

---

## 코드 분할

번들링은 훌륭하지만 여러분의 앱이 커지면 번들도 커진다. 특히 큰 규모의 서드 파티 라이브러리를 추가할 때 실수로 앱이 커져서 로드 시간이 길어지는 것을 방지하기 위해 코드를 주의 깊게 살펴야 한다.

번들이 거대해지는 것을 방지하기 위한 좋은 해결방법은 번들을 "나누는" 것입니다. 코드 분할은 런타임에 여러 번들을 동적으로 만들고 불러오는 것으로 Webpack, Rollup 과 Browserify(factor-bundle) 같은 번들러가 지원하는 기능이다.

코드 분할은 여러분의 앱을 "지연 로딩" 하게 도와주고 앱 사용자에게 획기적인 성능 향상을 하게 한다. 앱의 코드 양을 줄이지 않고도 사용자가 필요하지 않은 코드를 불러오지 않게 하며 앱의 초기화 로딩에 필요한 비용에 줄여줍니다.

---

## import()

앱에 코드 분할을 도입하는 가장 좋은 방법은 동적 import() 문법을 사용하는 방법입니다.

#### Before

``` js
import { add } from './math';

console.log(add(16,26));
```

#### After

``` js
import("./math").then(math => {
  console.log(math.add(16 26));
});
```

Webpack이 이 구문을 만나게 되면 앱의 코드를 분할합니다. Create React App을 사용하고 있다면 이미 Webpack이 구성되어 있기 때문에 즉시 사용할 수 있다.  
Babel을 사용할 때는 Babel 이 동적 import를 인식할 수 있지만 변환하지는 않도록한다. 이를 위한 babel-plugin-syntax-dynamic-import를 사용한다.

---